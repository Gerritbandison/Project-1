const h=document.getElementById("url-input"),u=document.getElementById("analyze-button"),r=document.getElementById("overview"),d=document.getElementById("card-container");u.addEventListener("click",()=>{const t=h.value.trim();if(!t){alert("Please enter a valid URL");return}const a=t.endsWith("site.json")?t:"".concat(t,"/site.json");p(a)});async function p(t){try{const a=await fetch(t);if(!a.ok)throw new Error("Failed to fetch data");const e=await a.json();if(!e.metadata||!e.metadata.site||!e.metadata.site.name||!e.items)throw new Error("Invalid site.json structure");g(e)}catch(a){console.error("Error:",a),alert("Could not retrieve data. Please check the URL and try again.")}}function s(t){return new Date(t*1e3).toLocaleDateString()}function g(t){f(t),v(t.items)}function f(t){const a=t.metadata.site.name||t.title,e=t.description||"No description available",n=t.metadata.theme.name||"Default Theme",c=t.metadata.site.updated?s(t.metadata.site.updated):"N/A",o=t.metadata.site.logo?t.metadata.site.logo:"";r.innerHTML="\n    ".concat(o?'<img src="'.concat(o,'" alt="Site Logo" style="max-width: 200px; margin-bottom: 10px;">'):"","\n    <h2>").concat(a,"</h2>\n    <p>").concat(e,"</p>\n    <p><strong>Theme:</strong> ").concat(n,"</p>\n    <p><strong>Last Updated:</strong> ").concat(c,"</p>\n  "),t.metadata.theme.variables.hexCode&&(r.style.backgroundColor=t.metadata.theme.variables.hexCode)}function v(t){d.innerHTML="",t.forEach(a=>{const e=document.createElement("div");e.className="card";const n=a.title||"Untitled",c=a.description||"No description available",o=a.metadata.updated?s(a.metadata.updated):"N/A",m=a.location?a.location:"#",l=a.location?"".concat(a.location.replace("/index.html",""),"/index.html"):"#",i=a.metadata.images&&a.metadata.images.length>0?a.metadata.images[0]:"";e.innerHTML="\n      ".concat(i?'<img src="'.concat(i,'" alt="').concat(n,'" style="max-width: 100%; height: auto; margin-bottom: 10px;">'):"","\n      <h3>").concat(n,"</h3>\n      <p>").concat(c,"</p>\n      <p><strong>Last Updated:</strong> ").concat(o,'</p>\n      <a href="').concat(m,'" target="_blank">View Item</a>\n      <a href="').concat(l,'" target="_blank">View Source</a>\n    '),d.appendChild(e)})}
